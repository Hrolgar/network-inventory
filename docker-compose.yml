services:
  network-inventory:
    image: ghcr.io/hrolgar/network-inventory:latest
    # build: .  # uncomment to build locally instead of pulling
    container_name: network-inventory
    ports:
      - "${PORT:-5000}:5000"
    environment:
      # Scan settings
      - SCAN_COOLDOWN=${SCAN_COOLDOWN:-300}
      - PORT=${PORT:-5000}

      # Network scanning
      - NETWORK_SCAN_ENABLED=${NETWORK_SCAN_ENABLED:-true}
      - NETWORK_SUBNET=${NETWORK_SUBNET:-10.69.1.0/24}

      # UniFi Controller
      - UNIFI_ENABLED=${UNIFI_ENABLED:-true}
      - UNIFI_HOST=${UNIFI_HOST}
      - UNIFI_PORT=${UNIFI_PORT:-443}
      - UNIFI_USERNAME=${UNIFI_USERNAME}
      - UNIFI_PASSWORD=${UNIFI_PASSWORD}
      - UNIFI_SITE=${UNIFI_SITE:-default}

      # Portainer
      - PORTAINER_ENABLED=${PORTAINER_ENABLED:-true}
      - PORTAINER_NAME=${PORTAINER_NAME:-Main Portainer}
      - PORTAINER_URL=${PORTAINER_URL}
      - PORTAINER_API_TOKEN=${PORTAINER_API_TOKEN}

    restart: unless-stopped

    # Optional: Use config.yaml instead of .env (for multiple Portainer instances)
    # volumes:
    #   - ./config.yaml:/app/config.yaml:ro

    # Optional: Run on host network for better network scanning
    # network_mode: host
    # Note: If using host network, remove the 'ports' section above
